# 币安BTC数据爬取工具

## 📁 文件说明

- `get_Data_of_all.py` - 历史数据爬取（一次性获取大量历史数据）
- `get_Data_of_realtime.py` - 实时数据爬取（持续监控并追加新数据）

## 🚀 使用方法

### 1. 安装依赖

```bash
pip install requests pandas
```

### 2. 获取历史数据

```bash
python get_Data_of_all.py
```

**功能特点：**
- 获取最近90天的历史K线数据（可配置）
- 自动分批获取，突破1000条限制
- 保存为CSV和JSON格式
- 生成详细统计信息

**输出文件：**
```
data/
├── BTCUSDT_1h_20241018_123456.csv          # CSV数据
├── BTCUSDT_1h_20241018_123456.json         # JSON数据
└── BTCUSDT_1h_20241018_123456_stats.json   # 统计信息
```

### 3. 实时数据监控

```bash
python get_Data_of_realtime.py
```

**功能特点：**
- 启动时自动回填最近24小时数据
- 每60秒更新一次（可配置）
- 追加保存到日期文件
- 显示实时价格和24小时行情
- 支持 Ctrl+C 安全退出

**输出文件：**
```
data/realtime/
├── BTCUSDT_1h_20241018.csv          # 当天累积数据
└── BTCUSDT_1h_latest.json           # 最新一条数据
```

## ⚙️ 配置参数

### get_Data_of_all.py

```python
symbol = "BTCUSDT"      # 交易对
interval = "1h"         # 时间框架 (1m, 5m, 15m, 1h, 4h, 1d)
days = 90               # 获取天数
```

### get_Data_of_realtime.py

```python
symbol = "BTCUSDT"          # 交易对
interval = "1h"             # 时间框架
update_interval = 60        # 更新间隔（秒）
backfill_hours = 24         # 启动时回填小时数
```

## 📊 数据格式

CSV文件包含以下列：

| 列名      | 说明        | 示例                |
| --------- | ----------- | ------------------- |
| timestamp | 时间戳      | 2024-10-18 10:00:00 |
| open      | 开盘价      | 67234.50            |
| high      | 最高价      | 67456.80            |
| low       | 最低价      | 67123.20            |
| close     | 收盘价      | 67345.60            |
| volume    | 成交量(BTC) | 123.45              |

## 🔍 使用场景

1. **模型训练** - 使用 `get_Data_of_all.py` 获取大量历史数据
2. **实时预测** - 使用 `get_Data_of_realtime.py` 持续获取最新数据
3. **回测分析** - 下载完整历史数据进行策略回测

## ⚠️ 注意事项

1. **不需要API Key** - 使用币安公开API，无需注册
2. **请求限制** - 币安API有速率限制，脚本已内置延迟
3. **网络连接** - 需要稳定的网络连接
4. **存储空间** - 长期运行实时爬虫会累积数据，注意磁盘空间

## 🐛 常见问题

### Q1: 连接超时怎么办？
A: 检查网络连接，或增加 timeout 参数值

### Q2: 数据有重复吗？
A: 脚本会自动去重，不用担心

### Q3: 可以同时爬取多个交易对吗？
A: 可以，修改代码支持多线程或多进程

## 📝 示例输出

```
==============================================================
开始获取 BTCUSDT 历史数据
==============================================================
交易对: BTCUSDT
时间框架: 1h
数据天数: 90 天

开始分批获取数据...
正在获取第 3 批数据...

✓ 共获取 3 批数据
✓ 数据合并完成: 2160 条记录
✓ 时间范围: 2024-07-20 ~ 2024-10-18

✓ CSV已保存: f:\Kronos-of-my\data\BTCUSDT_1h_20241018_123456.csv

==============================================================
📊 数据统计
==============================================================
交易对: BTCUSDT
时间框架: 1h
总记录数: 2,160 条
时间跨度: 90 天

💰 价格统计:
  最低价: $52,345.67
  最高价: $73,123.45
  平均价: $65,234.56
  起始价: $58,900.00
  最新价: $67,345.60
  涨跌幅: +14.33%

📈 成交量统计:
  总成交量: 123,456.78 BTC
  平均成交量: 57.14 BTC
  最大成交量: 456.78 BTC
==============================================================
```

## 🔗 相关链接

- [币安API文档](https://binance-docs.github.io/apidocs/)
- [Kronos模型](https://github.com/NeoQuasar/Kronos)
